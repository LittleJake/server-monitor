<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Server Monitor List</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/lipis/flag-icon-css@3.4.6/css/flag-icon.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/zdhxiong/mdui@0.4.3/dist/css/mdui.min.css">
</head>
<body class="mdui-drawer-body-left mdui-appbar-with-toolbar">
<div class="mdui-appbar mdui-appbar-fixed">
    <div class="mdui-toolbar mdui-color-indigo">
        <span class="mdui-btn mdui-btn-icon mdui-ripple mdui-ripple-white" mdui-drawer="{target:'#drawer',swipe:true}">
            <i class="mdui-icon material-icons">menu</i>
        </span>
        <a href="javascript:;" class="mdui-typo-headline">Server Monitor List</a>
        <div class="mdui-toolbar-spacer"></div>
    </div>
</div>
<div class="mdui-drawer" id="drawer">
    <ul class="mdui-list">
        {foreach $hash as $k => $v}
        <li class="mdui-list-item mdui-ripple">
            <span class="mdui-list-item-icon flag-icon flag-icon-{:strtolower($info[$v]['countryCode'])}"></span>
            <div class="mdui-list-item-content" data-href="{:url('index/index/info',['token'=>$k])}">
                <div class="mdui-list-item-title">
                    {:preg_replace("/\\.[\\d]+/",".*",$v)}
                </div>
                <div class="mdui-list-item-text mdui-list-item-one-line">
                    {$info[$v]['city'].", ".$info[$v]['countryCode']}
                </div>
            </div>
            <i class="mdui-icon material-icons mdui-text-color-green">&#xe2bf;</i>
        </li>
        {/foreach}
    </ul>
</div>
<div class="mdui-container" id="ajax">
    Server Monitor
</div>
<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/zdhxiong/mdui@0.4.3/dist/js/mdui.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/jquery/jquery@3.5.1/dist/jquery.min.js"></script>
<script>
    $('.mdui-list-item-content').on('click',function () {
        url = $(this).attr('data-href');
        $.ajax({
            'url': url,
            'success': function(data){
                $('#ajax').html(data);
                mdui.mutation();
            },
            'error': function () {
                window.location = url;
            }
        });
    })
</script>
</body>
</html>